
# Project: File Upload and Deployment

This project allows users to upload ZIP files through an endpoint, extracts the files, and serves them as static content on the web. It uses **Vercel** for deployment, with a serverless function for handling file uploads and static file serving.

---

## **Overview**

- **Backend:** Handles file uploads, extraction, and generates accessible links for users to view their extracted files.
- **Frontend:** Displays a form to upload ZIP files and shows the deployed link after successful extraction.
- **Deployment:** The project is deployed using **Vercel** to manage both serverless functions and static file serving.

---

## **Key Features**

- **ZIP Upload:** Users can upload ZIP files via a form on the website.
- **Automatic Extraction:** After the ZIP is uploaded, it is automatically extracted to a folder, and the files are served from a live URL.
- **Dynamic Site Creation:** Every uploaded file creates a unique folder that is accessible through a generated URL.

---

## **Folder Structure**

```
/project-root
│
├── /api
│   └── upload.js            # Your serverless function (handles file upload & extraction)
│
├── /public
│   ├── /sites
│   │   └── (dynamically created site folders from uploaded zip)
│   │       └── site-name
│   │           └── original
│   │               └── zip-file-name
│   │                   └── index.html   # Extracted HTML files (automatically generated from zip)
│   ├── index.html           # Public index page, if any (optional)
│   ├── script.js            # Frontend script (optional)
│   └── style.css            # Frontend styles (optional)
│
├── /node_modules            # Node.js modules (generated by npm install)
├── package.json             # Project dependencies & scripts
├── package-lock.json        # Exact versions of dependencies
├── vercel.json              # Vercel configuration for static file serving and routes
└── README.md                # Project description and setup guide (optional)
```

---

## **Setup Guide**

### **1. Clone the Repository**

First, clone the repository to your local machine:

```bash
git clone https://github.com/yourusername/your-repository-name.git
cd your-repository-name
```

### **2. Install Dependencies**

Run the following command to install all required dependencies:

```bash
npm install
```

### **3. Project Structure**

- **/api/upload.js**: This is a **serverless function** that handles the file upload, extraction, and generation of the links to the uploaded files.
- **/public**: This folder contains all your static assets, including the `index.html` page (if needed), frontend `script.js`, and CSS files. It will also contain the dynamically generated site folders for every uploaded ZIP file.

---

## **How It Works**

### **Uploading Files**

1. The user visits the `/upload` endpoint (or a specific page with a form).
2. The user uploads a ZIP file through a form.
3. The backend extracts the contents of the ZIP file and places them inside a newly created folder in the `/public/sites/` directory.
4. The server generates a live URL, such as `https://your-vercel-url.vercel.app/sites/{siteName}/original/{zipFileName}/index.html`, which the user can click to view the extracted site.


---

## **Vercel Configuration**

### **How Vercel Deploys the App**

- **`vercel.json` Configuration:**
    - This configuration file tells Vercel how to handle the routes and static assets.
    - It specifies that `/upload` should trigger the `upload.js` serverless function, and all static assets should be served from the `/public` folder.

```json
{
  "version": 2,
  "builds": [
    {
      "src": "api/upload.js",
      "use": "@vercel/node"
    },
    {
      "src": "public/*",
      "use": "@vercel/static"
    }
  ],
  "routes": [
    {
      "src": "/upload",
      "dest": "api/upload.js"
    },
    {
      "src": "/(.*)",
      "dest": "public/$1"
    }
  ]
}
```

### **Serverless Function (upload.js)**

The serverless function `/api/upload.js` handles the file upload and extraction.

1. The `multer` package is used to handle the uploaded files.
2. The `unzipper` package extracts the ZIP file.
3. The uploaded content is stored in a dynamically generated folder under `/public/sites/{siteName}`.
4. The generated URL is returned to the frontend to be displayed as a clickable link.

### **Example Response:**

After successfully uploading a file, the server returns a URL that the user can visit to see their extracted site:

```json
{
  "message": "Deployed at: https://your-vercel-url.vercel.app/sites/{siteName}/original/{zipFileName}/index.html"
}
```

---

## **Deploy to Vercel**

### **1. Push to GitHub**

Make sure your project is pushed to GitHub.

### **2. Connect GitHub to Vercel**

1. Go to [Vercel](https://vercel.com/).
2. Log in or sign up if you don’t have an account.
3. Click on **New Project**.
4. Connect your GitHub account and select the repository.
5. Vercel will automatically detect the `vercel.json` file and configure the build and deployment settings.

### **3. Deploy**

After the project is connected to Vercel, it will automatically deploy the app. When the deployment is complete, you will receive a unique Vercel URL for your app.

---

## **Troubleshooting**

### **Common Issues**

1. **404: Not Found Error**:
   - If you see a 404 error when accessing the generated link, ensure that the uploaded ZIP file is correctly extracted into the `/public/sites/{siteName}/` folder.
   - Double-check your serverless function (`upload.js`) for any issues with the extraction logic.

2. **File Upload Failures**:
   - If the file upload fails, check the console logs for errors.
   - Make sure the ZIP file is correctly formatted and the `multer` configuration in `upload.js` is properly set up.

---

## **Conclusion**

This project allows you to upload ZIP files, extract them, and serve the extracted files through unique URLs. It's a simple solution for deploying and viewing ZIP file contents on the web. The combination of Vercel serverless functions and static file serving makes this a scalable and easy-to-deploy solution for your use case.

Let me know if you need further help or clarification!

--- 

This `README.md` provides an easy-to-follow guide for setting up, understanding, and troubleshooting your project. You can further extend this based on specific features or customizations.


